{"ast":null,"code":"var _jsxFileName = \"/home/lois/Sites/compound_catalogue/frontend/src/compound_table/table.js\";\nimport React from 'react';\nimport { useQuery } from 'react-apollo';\nimport { gql } from 'apollo-boost';\nimport Table from '@material-ui/core/Table';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TablePagination from '@material-ui/core/TablePagination';\nimport Paper from '@material-ui/core/Paper';\nimport { CompoundTableHeader } from './table_header';\nimport { CompoundTableBody } from './table_body';\nexport function EnhancedTable() {\n  const [order, setOrder] = React.useState('asc');\n  const [orderBy, setOrderBy] = React.useState('compoundId');\n  const [page, setPage] = React.useState(0);\n  const [rowsPerPage, setRowsPerPage] = React.useState(100);\n  const QUERY_COMPOUNDS = gql`\n    query {\n      compounds\t{\n        compoundId\n        molecularFormula\n        molecularWeight\n      }\n    }\n  `;\n  const {\n    data,\n    loading\n  } = useQuery(QUERY_COMPOUNDS, {\n    pollInterval: 500\n  });\n\n  const handleRequestSort = (event, property) => {\n    const isAsc = orderBy === property && order === 'asc';\n    setOrder(isAsc ? 'desc' : 'asc');\n    setOrderBy(property);\n  };\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = event => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  const sortedData = stableSort(data.compounds, getComparator(order, orderBy)).slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage);\n\n  function descendingComparator(a, b, orderBy) {\n    if (b[orderBy] < a[orderBy]) {\n      return -1;\n    }\n\n    if (b[orderBy] > a[orderBy]) {\n      return 1;\n    }\n\n    return 0;\n  }\n\n  function getComparator(order, orderBy) {\n    return order === 'desc' ? (a, b) => descendingComparator(a, b, orderBy) : (a, b) => -descendingComparator(a, b, orderBy);\n  }\n\n  function stableSort(array, comparator) {\n    const stabilizedThis = array.map((el, index) => [el, index]);\n    stabilizedThis.sort((a, b) => {\n      const order = comparator(a[0], b[0]);\n      if (order !== 0) return order;\n      return a[1] - b[1];\n    });\n    return stabilizedThis.map(el => el[0]);\n  }\n\n  if (loading) return /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 23\n    }\n  }, \"Loading...\");\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"root\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Paper, {\n    className: \"paper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TableContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Table, {\n    className: \"table\",\n    \"aria-labelledby\": \"tableTitle\",\n    \"aria-label\": \"enhanced table\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CompoundTableHeader, {\n    order: order,\n    orderBy: orderBy,\n    onRequestSort: handleRequestSort,\n    rowCount: data.compounds.length,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(CompoundTableBody, {\n    tableData: sortedData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(TablePagination, {\n    rowsPerPageOptions: [5, 10, 25, 100],\n    component: \"div\",\n    count: data.compounds.length,\n    rowsPerPage: rowsPerPage,\n    page: page,\n    onChangePage: handleChangePage,\n    onChangeRowsPerPage: handleChangeRowsPerPage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 9\n    }\n  })));\n}","map":{"version":3,"sources":["/home/lois/Sites/compound_catalogue/frontend/src/compound_table/table.js"],"names":["React","useQuery","gql","Table","TableContainer","TablePagination","Paper","CompoundTableHeader","CompoundTableBody","EnhancedTable","order","setOrder","useState","orderBy","setOrderBy","page","setPage","rowsPerPage","setRowsPerPage","QUERY_COMPOUNDS","data","loading","pollInterval","handleRequestSort","event","property","isAsc","handleChangePage","newPage","handleChangeRowsPerPage","parseInt","target","value","sortedData","stableSort","compounds","getComparator","slice","descendingComparator","a","b","array","comparator","stabilizedThis","map","el","index","sort","length"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { useQuery } from 'react-apollo';\nimport { gql } from 'apollo-boost';\nimport Table from '@material-ui/core/Table';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport TablePagination from '@material-ui/core/TablePagination';\nimport Paper from '@material-ui/core/Paper';\nimport { CompoundTableHeader } from './table_header';\nimport { CompoundTableBody } from './table_body';\n\nexport function EnhancedTable() {\n  const [order, setOrder] = React.useState('asc');\n  const [orderBy, setOrderBy] = React.useState('compoundId');\n  const [page, setPage] = React.useState(0);\n  const [rowsPerPage, setRowsPerPage] = React.useState(100);\n\n  const QUERY_COMPOUNDS = gql`\n    query {\n      compounds\t{\n        compoundId\n        molecularFormula\n        molecularWeight\n      }\n    }\n  `;\n\n  const { data, loading } = useQuery(\n    QUERY_COMPOUNDS, {\n      pollInterval: 500\n    }\n  );\n\n  const handleRequestSort = (event, property) => {\n    const isAsc = orderBy === property && order === 'asc';\n    setOrder(isAsc ? 'desc' : 'asc');\n    setOrderBy(property);\n  };\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = (event) => {\n    setRowsPerPage(parseInt(event.target.value, 10));\n    setPage(0);\n  };\n\n  const sortedData = stableSort(data.compounds, getComparator(order, orderBy))\n    .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n\n  function descendingComparator(a, b, orderBy) {\n    if (b[orderBy] < a[orderBy]) {\n      return -1;\n    }\n    if (b[orderBy] > a[orderBy]) {\n      return 1;\n    }\n    return 0;\n  }\n\n  function getComparator(order, orderBy) {\n    return order === 'desc'\n      ? (a, b) => descendingComparator(a, b, orderBy)\n      : (a, b) => -descendingComparator(a, b, orderBy);\n  }\n\n  function stableSort(array, comparator) {\n    const stabilizedThis = array.map((el, index) => [el, index]);\n    stabilizedThis.sort((a, b) => {\n      const order = comparator(a[0], b[0]);\n      if (order !== 0) return order;\n      return a[1] - b[1];\n    });\n    return stabilizedThis.map((el) => el[0]);\n  }\n\n  if (loading) return <p>Loading...</p>;\n\n  return (\n    <div className=\"root\">\n      <Paper className=\"paper\">\n        <TableContainer>\n          <Table className=\"table\" aria-labelledby=\"tableTitle\" aria-label=\"enhanced table\">\n            <CompoundTableHeader order={order} orderBy={orderBy} onRequestSort={handleRequestSort} rowCount={data.compounds.length}/>\n            <CompoundTableBody tableData={sortedData}/>\n          </Table>\n        </TableContainer>\n        <TablePagination\n          rowsPerPageOptions={[5, 10, 25, 100]}\n          component=\"div\"\n          count={data.compounds.length}\n          rowsPerPage={rowsPerPage}\n          page={page}\n          onChangePage={handleChangePage}\n          onChangeRowsPerPage={handleChangeRowsPerPage}\n        />\n      </Paper>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}